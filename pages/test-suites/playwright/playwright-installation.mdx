---
title: Playwright
---
import { Callout, Tabs } from 'nextra/components'
import Video from '@components/Video'
import MaterialSymbolsSettings from '@icons/MaterialSymbolsSettings'
import addTeam from '/videos/add_team.mp4'
import apiKeys from '/videos/api-keys.mp4'

# Playwright

## Install the Replay plugin

**1. Install the [@replayio/playwright](https://www.npmjs.com/package/@replayio/playwright) package into your project:**

```sh npm2yarn
npm install @replayio/playwright -D
```

**2. Add Replay Chromium browser to your `playwright.config.ts` file.**

```tsx {2,6-9} filename="playwright.config.ts"
import { PlaywrightTestConfig, devices } from "@playwright/test";
import { devices as replayDevices } from "@replayio/playwright";

const config: PlaywrightTestConfig = {
  projects: [
    {
      name: "replay-chromium",
      use: { ...replayDevices["Replay Chromium"] as any },
    },
    {
      name: "firefox",
      use: { ...devices["Desktop Firefox"] },
    },
    {
      name: "chromium",
      use: { ...devices["Desktop Chromium"] },
    },
  ],
};
export default config;
```

## Setup Replay Dashboard

First, create a new team in Replay to organize your Playwright replays. Youâ€™ll also need an API Key to upload your replays and team API keys have much higher limits than personal API keys.

**1. Go to your Replay Dashboard and create a new team**

Alternatively, you can visit [this link](https://app.replay.io/team/new) to instantly create a new team.
<Video src={addTeam} />
<Callout type="info" emoji="ðŸ’¡">
Test Suites are currently in closed Beta. If youâ€™d like to start recording your tests, test suites need to be enabled in your team. Join our [**waitlist**](https://replayio.typeform.com/to/jTudlerL) and weâ€™ll reach out to you as soon as possible.
</Callout>

**2. Once youâ€™ve created a team, click on the settings <MaterialSymbolsSettings className="w-6 h-6 inline-block" /> icon next to your team name and [create a new API Key](/getting-started/teams-admin/team-settings)**

<Video src={apiKeys} />

**3. Save that API in your CI environment as `REPLAY_API_KEY`**

This step may vary depending on your CI provider. You can learn more about how to set up environment variables with different CI providers [on this docs page](/test-suites/cypress/continuous-integration).

## Integrate into your CI workflow

Replay is designed to record tests in CI so you can debug when tests fail. Without Replay, test failures in CI are like a black box, with little insights into what went wrong. By recording with Replay, you get a full recording of the test run with debugging tools built in.

Here are basic configurations for some of the most popular providers which you can add to you project

<Tabs items={['GitHub Actions', 'CircleCI']}>
<Tabs.Tab>
```yml filename=".github/workflows/e2e.yml" copy
name: End-to-end tests
on: [push, pull_request]
jobs:
  cypress-run:
    runs-on: ubuntu-22.04
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - uses: actions/setup-node@v3
        with:
          node-version: 18
      - name: Install dependencies
        run: npm ci
      - name: Install Playwright Browsers
        run: npx playwright install --with-deps
      - name: Run Playwright tests
        run: npx playwright test --project replay-chromium --reporter=@replayio/playwright/reporter,line
      - name: Upload replays
        if: ${{ always() }}
        uses: replayio/action-upload@v0.5.1
        with:
          public: true
          api-key: ${{ secrets.RECORD_REPLAY_API_KEY }}
```
</Tabs.Tab>
</Tabs>

## Recording tests locally

While Replay Test Suites is designed for debugging tests in CI, it can be helpful to record a test locally for additional debugging or when first getting set up. 

### Recording replays

- Ensure your project is configured with `replayio/playwright`
- Configure Playwright to only use a single worker and increase the timeout if needed to allow for increased run time. See config example below.
- Set `RECORD_REPLAY_API_KEY` as an environment variable locally
- Pass the `--project` flag, and your selected browser option:
    - `--project project-name` (`replay-chromium` or `replay-firefox` )
    - Currently supported browser options are `replay-chromium` (Linux) or `replay-firefox` (maxOS, Linux)
- Pass the `--reporter` flag like this:
    - `--reporter=@replayio/playwright/reporter,line`

For example, to use Replay Firefox (macOS, Linux), the command is:

```bash
npx playwright test --project replay-firefox --reporter=@replayio/playwright/reporter,line
```

**If you donâ€™t specify a project, all projects defined in your config will run.**

**Config example:**

```jsx
import { PlaywrightTestConfig, devices } from "@playwright/test";
import { devices as replayDevices } from "@replayio/playwright";

const inCI = !!process.env.CI;

const config: PlaywrightTestConfig = {
  timeout: !inCI ? 30 * 1000 : 10 * 1000,
  workers: !inCI ? 1 : undefined,
  use: {
    baseURL: !inCI ? "http://localhost:3000" : undefined,
    launchOptions: {
      slowMo: inCI ? 0 : 500,
    },
  },
  projects: [
    {
      name: "replay-firefox",
      use: { ...replayDevices["Replay Firefox"] as any },
    },
    {
      name: "replay-chromium",
      use: { ...replayDevices["Replay Chromium"] as any },
    },
    {
      name: "firefox",
      use: { ...devices["Desktop Firefox"] },
    },
    {
      name: "chromium",
      use: { ...devices["Desktop Chromium"] },
    },
  ],
};
export default config;
```

We recommend using the [options available in Playwright to only run certain tests as needed](https://playwright.dev/docs/running-tests).

## Uploading replays

Replays are uploaded locally using the `@replayio/replay` CLI. Your API key must be set as the `RECORD_REPLAY_API_KEY` environment variable to upload.

- To see available replays for upload, use `npx @replayio/replay ls`
- To upload a single replay, use `npx @replayio/replay upload <id>`
- To upload all available replays, use `npx @replayio/replay upload-all`

[Full instructions at the `@replayio/replay` repo.](https://github.com/replayio/replay-cli/tree/main/packages/replay)

<Callout type="info" emoji="ðŸ’¡">
Once youâ€™ve recorded, view test results and replays using the [Test Suite Dashboard]/Features/Test-Suite-Dashboard.md) and [Pull Request Comments]/Features/Pull-Request-Comments.md).

</Callout>

[Troubleshooting Guide](/test-suites/playwright/playwright-troubleshooting-guide)

[Playwright FAQs](/test-suites/playwright/playwright-faqs)

[Playwright Node](/test-suites/playwright/playwright-node)